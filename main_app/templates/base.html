<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>{% block title %}سامانه مدیریت بیمارستان{% endblock %}</title>

    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>

    {% load static %}
    {% block extra_head %}{% endblock %}

    <style>
        html, body { height: 100%; }
        body { background-color: #f8fafc; }
        /* Toast container position (RTL-friendly) */
        #toast-container { inset-inline-end: 1rem; inset-block-start: 1rem; }
        /* Form base styles */
        .form-label { display:block; font-size:0.875rem; color:#374151; margin-bottom:0.25rem; }
        .form-input { width:100%; border:1px solid #d1d5db; border-radius:0.5rem; padding:0.625rem 0.75rem; background:#fff; }
        .form-input:focus { outline:none; border-color:#3b82f6; box-shadow:0 0 0 3px rgba(59,130,246,0.2); }
        .btn-primary { display:inline-flex; justify-content:center; align-items:center; width:100%; background:#2563eb; color:#fff; font-weight:700; padding:0.625rem 1rem; border-radius:0.5rem; transition:background 150ms; }
        .btn-primary:hover { background:#1d4ed8; }
        .link { color:#2563eb; }
        .link:hover { text-decoration: underline; }
        .error-text { color:#dc2626; font-size:0.875rem; margin-top:0.25rem; }
        .card { background:#ffffff; border-radius:0.75rem; box-shadow:0 10px 25px rgba(0,0,0,0.05); padding:2rem; }
        .card-title { font-size:1.5rem; font-weight:800; text-align:center; margin-bottom:1.25rem; color:#111827; }
        .muted { color:#6b7280; font-size:0.875rem; }
    </style>
</head>
<body class="min-h-screen">
    <!-- Toast Messages -->
    <div id="toast-container" class="fixed z-50 space-y-2">
        {% if messages %}
            {% for message in messages %}
                {% if "success" in message.tags %}
                    {% with toast_bg="bg-green-50" toast_text="text-green-800" border="border-green-200" %}
                        <div class="rounded-lg border {{ border }} {{ toast_bg }} px-4 py-3 {{ toast_text }} shadow">
                            {{ message }}
                        </div>
                    {% endwith %}
                {% elif "error" in message.tags %}
                    {% with toast_bg="bg-red-50" toast_text="text-red-800" border="border-red-200" %}
                        <div class="rounded-lg border {{ border }} {{ toast_bg }} px-4 py-3 {{ toast_text }} shadow">
                            {{ message }}
                        </div>
                    {% endwith %}
                {% elif "warning" in message.tags %}
                    {% with toast_bg="bg-yellow-50" toast_text="text-yellow-800" border="border-yellow-200" %}
                        <div class="rounded-lg border {{ border }} {{ toast_bg }} px-4 py-3 {{ toast_text }} shadow">
                            {{ message }}
                        </div>
                    {% endwith %}
                {% else %}
                    {% with toast_bg="bg-blue-50" toast_text="text-blue-800" border="border-blue-200" %}
                        <div class="rounded-lg border {{ border }} {{ toast_bg }} px-4 py-3 {{ toast_text }} shadow">
                            {{ message }}
                        </div>
                    {% endwith %}
                {% endif %}
            {% endfor %}
        {% endif %}
    </div>

    <!-- Page container -->
    <main class="container mx-auto px-4 py-8">
        {% block content %}{% endblock %}
    </main>

    {% block extra_js %}{% endblock %}

    <script>
        // Auto-hide toasts after 5 seconds
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('toast-container');
            if (!container) return;
            [...container.children].forEach((el, idx) => {
                setTimeout(() => {
                    el.style.transition = 'opacity 300ms';
                    el.style.opacity = '0';
                    setTimeout(() => el.remove(), 300);
                }, 4500 + (idx * 300));
            });
        });
    </script>
</body>
</html>
